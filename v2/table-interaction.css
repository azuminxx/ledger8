/* =============================================================================
   ğŸ¯ çµ±åˆå°å¸³ã‚·ã‚¹ãƒ†ãƒ  v2 - ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ»æ“ä½œã‚¹ã‚¿ã‚¤ãƒ«
   @description ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ãƒ»ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ãƒ»ã‚»ãƒ«é¸æŠã‚¹ã‚¿ã‚¤ãƒ«
   @version 2.0.0
   ============================================================================= */

/* =============================================================================
   ğŸ¯ ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—é–¢é€£ã‚¹ã‚¿ã‚¤ãƒ«
   ============================================================================= */

/* ğŸ”² ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ã‚»ãƒ« */
.cell-draggable {
    cursor: grab;
    position: relative;
}

.cell-draggable:active {
    cursor: grabbing;
}

/* ğŸ¯ ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã®è¡Œ */
.row-dragging {
    background-color: #f0f0f0 !important;
    border: 1px dashed #999 !important;
    opacity: 0.8;
}

/* ğŸ¯ ãƒ‰ãƒ­ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¡Œï¼ˆä¸Šéƒ¨ãƒœãƒ¼ãƒ€ãƒ¼ï¼‰ */
.drop-target-top {
    border-top: 3px solid #2196f3 !important;
}

/* ğŸ¯ ãƒ‰ãƒ­ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆè¡Œï¼ˆä¸‹éƒ¨ãƒœãƒ¼ãƒ€ãƒ¼ï¼‰ */
.drop-target-bottom {
    border-bottom: 3px solid #2196f3 !important;
}

/* ğŸ¯ ã‚»ãƒ«é¸æŠãƒã‚¤ãƒ©ã‚¤ãƒˆ - table-styles.cssã§å®šç¾©æ¸ˆã¿ã®ãŸã‚å‰Šé™¤ */

/* ğŸ¯ ãƒ‰ãƒ©ãƒƒã‚°å¯¾è±¡ã‚»ãƒ« */
.cell-drag-over {
    background-color: #f3e5f5 !important;
    border: 2px dashed #9c27b0 !important;
}

/* =============================================================================
   ğŸ“‹ ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«æ©Ÿèƒ½ã‚¹ã‚¿ã‚¤ãƒ«
   ============================================================================= */

/* ğŸ”§ ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«å¯¾å¿œã‚»ãƒ« */
.cell-with-fill-handle {
    position: relative;
}

/* ğŸ”§ ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«å¯¾å¿œã‚»ãƒ«ã®å³ä¸‹ã‚¨ãƒªã‚¢ã§ã‚«ãƒ¼ã‚½ãƒ«å¤‰æ›´ï¼ˆç¯„å›²æ‹¡å¤§ï¼‰ */
.cell-with-fill-handle::after {
    content: '';
    position: absolute;
    bottom: 0;
    right: 0;
    width: 15px;
    height: 15px;
    cursor: crosshair;
    z-index: 99;
    pointer-events: none; /* ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆã¯ã‚»ãƒ«ã¨ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«ã«å§”è­² */
}

/* ğŸ“‹ ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«æœ¬ä½“ - ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ç¯„å›²æ‹¡å¤§ */
.fill-handle {
    position: absolute;
    bottom: -2px;
    right: -2px;
    width: 12px;
    height: 12px;
    background-color: transparent;
    border: none;
    cursor: crosshair;
    z-index: 100;
    opacity: 0;
}

/* ğŸ”§ ã‚»ãƒ«ãƒ›ãƒãƒ¼æ™‚ã«ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«ã®ã‚«ãƒ¼ã‚½ãƒ«ã‚¨ãƒªã‚¢ã‚’æœ‰åŠ¹åŒ– */
.cell-with-fill-handle:hover .fill-handle {
    opacity: 1;
}

/* ğŸ“‹ ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«ãƒ›ãƒãƒ¼æ™‚ - è¦–è¦šè¡¨ç¤ºãªã—ã€ã‚«ãƒ¼ã‚½ãƒ«ã®ã¿ */
.fill-handle:hover {
    opacity: 1 !important;
    cursor: crosshair;
}

/* ğŸ“‹ ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«ãƒ‰ãƒ©ãƒƒã‚°ä¸­ - è¦–è¦šè¡¨ç¤ºãªã— */
.fill-handle.dragging {
    opacity: 1 !important;
    cursor: crosshair;
}

/* ğŸ“‹ ãƒ•ã‚£ãƒ«é¸æŠç¯„å›²è¡¨ç¤º */
.fill-selection {
    background-color: rgba(76, 175, 80, 0.1) !important;
    border: 3px dashed #4caf50 !important;
}

/* ğŸ“‹ ãƒ•ã‚£ãƒ«å®Ÿè¡Œå®Œäº†å¾Œã®ä¸€æ™‚ãƒã‚¤ãƒ©ã‚¤ãƒˆ */
.fill-completed {
    background-color: rgba(76, 175, 80, 0.3) !important;
    border: 2px solid #4caf50 !important;
    animation: fillCompletedPulse 1s ease-out;
}

@keyframes fillCompletedPulse {
    0% {
        background-color: rgba(76, 175, 80, 0.5);
        transform: scale(1.02);
    }
    100% {
        background-color: rgba(76, 175, 80, 0.1);
        transform: scale(1);
    }
}

/* =============================================================================
   ğŸ¯ Phase 4: ç·¨é›†ãƒ¢ãƒ¼ãƒ‰å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
   ============================================================================= */

/* ğŸ¯ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰è¡Œã®ã‚¹ã‚¿ã‚¤ãƒ« */
tr.row-editable {
    background-color: #fff8e1 !important; /* è–„ã„é»„è‰²ã®èƒŒæ™¯ */
    border-left: 3px solid #ff9800 !important; /* ã‚ªãƒ¬ãƒ³ã‚¸è‰²ã®å·¦å¢ƒç•Œ */
}

/* ç·¨é›†å¯èƒ½ã‚»ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
.cell-editable {
    position: relative;
    border: 1px solid #e0e0e0;
    background-color: #ffffff; /* ç™½ã„èƒŒæ™¯ã§ç·¨é›†å¯èƒ½ã‚’æ˜ç¤º */
}

/* ç·¨é›†å¯èƒ½ã‚»ãƒ«å†…ã®å…¥åŠ›è¦ç´  */
.cell-editable input,
.cell-editable select {
    width: 100%;
    border: none;
    background: transparent;
    padding: 4px 8px;
    font-size: inherit;
    font-family: inherit;
    box-sizing: border-box;
    height: 100%;
    min-height: 22px;
}

.cell-editable input:focus,
.cell-editable select:focus {
    outline: 2px solid #2196f3;
    outline-offset: -2px;
    background-color: #f3f8ff; /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®è–„ã„é’èƒŒæ™¯ */
}

/* ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ã‚»ãƒ«ã®ã‚¹ã‚¿ã‚¤ãƒ« */
td.draggable-cell {
    cursor: grab !important;
    position: relative;
    transition: background-color 0.2s ease !important;
}

td.draggable-cell:hover {
    background-color: #e3f2fd !important;
}

td.draggable-cell:active,
td.draggable-cell.dragging {
    opacity: 0.7 !important;
    cursor: grabbing !important;
    background-color: #bbdefb !important;
    transform: scale(0.98) !important;
}

/* ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã®ãƒ‰ãƒ­ãƒƒãƒ—ã‚¾ãƒ¼ãƒ³åŠ¹æœ - åˆ†é›¢ãƒœã‚¿ãƒ³ãŒãªã„å ´åˆã®ã¿ */
td.draggable-cell:hover::after {
    content: "ğŸ”„" !important;
    position: absolute !important;
    top: 2px !important;
    right: 2px !important;
    font-size: 10px !important;
    opacity: 0.7 !important;
    z-index: 1 !important;
}

/* ğŸ¯ åˆ†é›¢ãƒœã‚¿ãƒ³ä»˜ãã‚»ãƒ«ã§ã¯ãƒ‰ãƒ©ãƒƒã‚°ã‚¢ã‚¤ã‚³ãƒ³ã‚’éè¡¨ç¤º */
td.draggable-cell .flex-container:hover ~ ::after,
td.draggable-cell:has(.flex-container):hover::after {
    display: none !important;
}

/* ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã®ã‚»ãƒ«ãƒã‚¤ãƒ©ã‚¤ãƒˆå¼·åŒ– */
tr.row-editable td.cell-modified {
    background-color: #fff3e0 !important; /* ã‚ªãƒ¬ãƒ³ã‚¸ç³»ã®å¤‰æ›´å¼·èª¿ */
    /* ãƒœãƒ¼ãƒ€ãƒ¼ã¯ä¸Šè¨˜ã®çµ±ä¸€ãƒ«ãƒ¼ãƒ«ï¼ˆç·‘ãƒœãƒ¼ãƒ€ãƒ¼ï¼‰ã‚’ä½¿ç”¨ */
}

tr.row-editable td.cell-modified input,
tr.row-editable td.cell-modified select {
    background-color: #fffaef !important; /* ã‚ˆã‚Šè–„ã„ã‚ªãƒ¬ãƒ³ã‚¸èƒŒæ™¯ */
}

/* ç·¨é›†ãƒ¢ãƒ¼ãƒ‰æ™‚ã®ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹åˆ—ã‚¹ã‚¿ã‚¤ãƒ« */
tr.row-editable .modification-checkbox-cell {
    background-color: #e8f5e8 !important; /* ç·‘ç³»ã®èƒŒæ™¯ã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚’ç¤ºã™ */
    border: 2px solid #4caf50 !important;
}

/* ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ç„¡åŠ¹åŒ–æ™‚ã®ã‚¹ã‚¿ã‚¤ãƒ« */
tr.row-editable.editing-disabled {
    opacity: 0.6 !important;
    pointer-events: none !important;
}

/* ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
tr.row-editable {
    transition: all 0.3s ease-in-out !important;
}

.cell-editable {
    transition: border-color 0.2s ease, background-color 0.2s ease;
}

/* ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ç”¨ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ */
@keyframes editModeActivation {
    0% { 
        background-color: #ffffff;
        border-left-width: 0px;
    }
    50% { 
        background-color: #fff8e1;
        border-left-width: 2px;
    }
    100% { 
        background-color: #fff8e1;
        border-left-width: 3px;
    }
}

tr.row-editable.newly-activated {
    animation: editModeActivation 0.5s ease-out !important;
}

/* =============================================================================
   ğŸ“ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«èª¬æ˜
   ============================================================================= */

/*
ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã®èª¬æ˜:
1. tr.row-editable: ç·¨é›†å¯èƒ½ãªè¡Œï¼ˆè–„é»„è‰²èƒŒæ™¯ + ã‚ªãƒ¬ãƒ³ã‚¸å·¦å¢ƒç•Œï¼‰
2. td.cell-editable: ç·¨é›†å¯èƒ½ã‚»ãƒ«ï¼ˆç™½èƒŒæ™¯ + è–„ã„ã‚°ãƒ¬ãƒ¼å¢ƒç•Œï¼‰
3. td.draggable-cell: ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ã‚»ãƒ«ï¼ˆã‚°ãƒ©ãƒ–ã‚«ãƒ¼ã‚½ãƒ« + ãƒ›ãƒãƒ¼åŠ¹æœï¼‰
4. .newly-activated: æ–°è¦ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
5. .editing-disabled: ç·¨é›†ç„¡åŠ¹åŒ–æ™‚ã®è¦–è¦šçš„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

ã‚«ãƒ©ãƒ¼è¨­è¨ˆ:
- #fff8e1: è–„ã„é»„è‰²ï¼ˆç·¨é›†è¡ŒèƒŒæ™¯ï¼‰
- #ff9800: ã‚ªãƒ¬ãƒ³ã‚¸ï¼ˆã‚¢ã‚¯ãƒ†ã‚£ãƒ–å¢ƒç•Œï¼‰
- #2196f3: é’ï¼ˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹è‰²ï¼‰
- #4caf50: ç·‘ï¼ˆãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹æœ‰åŠ¹åŒ–ï¼‰
- #e3f2fd/#bbdefb: é’ç³»ï¼ˆãƒ‰ãƒ©ãƒƒã‚°ãƒ›ãƒãƒ¼åŠ¹æœï¼‰

ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®:
- transitionåŠ¹æœã¯0.2-0.3ç§’ã«åˆ¶é™
- transformåŠ¹æœã¯æœ€å°é™ã«æŠ‘åˆ¶
- z-indexã¯å¿…è¦æœ€å°é™ã«è¨­å®š
*/

/* =============================================================================
   ğŸ¯ ã‚»ãƒ«é¸æŠã‚¹ã‚¿ã‚¤ãƒ« - Excelé¢¨ãƒã‚¤ãƒ©ã‚¤ãƒˆ
   ============================================================================= */

/* ğŸ¯ Excelé¢¨ã‚»ãƒ«é¸æŠã‚¹ã‚¿ã‚¤ãƒ« */
tr[data-row-id] td.cell-editable.cell-selected {
    background-color: transparent !important; /* èƒŒæ™¯ãªã— */
    border: 1px solid #22c55e !important; /* ç´°ã„ç·‘è‰²ã®å¢ƒç•Œç·š */
    box-shadow: inset 0 0 0 1px #22c55e !important; /* å†…å´å¢ƒç•Œç·šã§ã‚·ãƒ£ãƒ¼ãƒ—ã•å‘ä¸Š */
    position: relative;
    z-index: 10;
}

/* ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«ï¼ˆExcelé¢¨ã®å°ã•ãªå››è§’ï¼‰ */
tr[data-row-id] td.cell-editable.cell-selected::after {
    content: '';
    position: absolute;
    bottom: -1px;
    right: -1px;
    width: 6px;
    height: 6px;
    background-color: #22c55e;
    border: 1px solid #ffffff;
    cursor: crosshair;
    z-index: 15;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

/* ãƒ›ãƒãƒ¼æ™‚ã®ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«å¼·èª¿ */
tr[data-row-id] td.cell-editable.cell-selected:hover::after {
    background-color: #16a34a;
    transform: scale(1.2);
    transition: all 0.1s ease;
}

/* é¸æŠã‚»ãƒ«ã®ãƒ›ãƒãƒ¼åŠ¹æœã‚’æŠ‘åˆ¶ï¼ˆExcelé¢¨ï¼‰ */
tr[data-row-id] td.cell-editable.cell-selected:hover {
    background-color: transparent !important; /* èƒŒæ™¯ãªã— */
    border: 1px solid #22c55e !important;
}

/* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ã‚¢ã‚¦ãƒˆãƒ©ã‚¤ãƒ³å‰Šé™¤ */
tr[data-row-id] td.cell-editable.cell-selected:focus {
    outline: none !important;
}

/* ç·¨é›†ä¸­ã®ã‚»ãƒ«ã¯å¢ƒç•Œç·šã‚’ã‚ˆã‚Šå¼·èª¿ */
tr[data-row-id] td.cell-editable.cell-selected.editing {
    border: 2px solid #22c55e !important;
    background-color: transparent !important;
}

/* ç·¨é›†ä¸­ã¯ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«ã‚’éè¡¨ç¤º */
tr[data-row-id] td.cell-editable.cell-selected.editing::after {
    display: none;
}

/* å¤‰æ›´æ¸ˆã¿ã‚»ãƒ«ã§ã‚‚æ“¬ä¼¼è¦ç´ ã‚’ç„¡åŠ¹åŒ–ï¼ˆå®‰å…¨å¯¾ç­–ï¼‰ */
tr[data-row-id] td.cell-editable.cell-modified::after {
    display: none !important;
}

/* ğŸ¯ ç·¨é›†ä¸å¯ã‚»ãƒ«ã®é¸æŠã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰ */
tr[data-row-id] td.cell-selected {
    background-color: rgba(200, 200, 200, 0.2) !important; /* ã‚°ãƒ¬ãƒ¼ç³» */
    border: 2px solid #666666 !important;
    position: relative;
    z-index: 10;
}

/* ç·¨é›†ä¸å¯ã‚»ãƒ«ã«ã¯ãƒ•ã‚£ãƒ«ãƒãƒ³ãƒ‰ãƒ«ãªã— */
tr[data-row-id] td.cell-selected:not(.cell-editable)::after {
    display: none;
}

/* Excelé¢¨ã‚»ãƒ«é¸æŠã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
tr[data-row-id] td.cell-selected {
    transition: all 0.1s ease-out !important; /* Excelé¢¨ã®ç´ æ—©ã„åå¿œ */
}

/* ã‚»ãƒ«é¸æŠæ™‚ã®éš£æ¥ã‚»ãƒ«ã¸ã®å½±éŸ¿ã‚’æœ€å°åŒ– */
tr[data-row-id] td.cell-selected {
    box-sizing: border-box !important;
    margin: 0 !important;
}

/* é¸æŠã•ã‚ŒãŸã‚»ãƒ«å†…ã®å…¥åŠ›è¦ç´ ã‚¹ã‚¿ã‚¤ãƒ«èª¿æ•´ */
tr[data-row-id] td.cell-selected input,
tr[data-row-id] td.cell-selected select {
    background-color: transparent !important;
    border: none !important;
    outline: none !important;
}

/* =============================================================================
   ğŸ”„ ã‚»ãƒ«äº¤æ›ï¼ˆãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ï¼‰ã‚¹ã‚¿ã‚¤ãƒ«
   ============================================================================= */

/* ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã®ã‚»ãƒ«ï¼ˆè»½é‡åŒ–ç‰ˆï¼‰ */
td.swap-dragging {
    opacity: 0.6 !important;
    background-color: rgba(255, 193, 7, 0.2) !important;
    border: 1px dashed #ff9800 !important;
    /* transformã¨z-indexã‚’å‰Šé™¤ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š */
}

/* ãƒ‰ãƒ­ãƒƒãƒ—å¯¾è±¡ã®ã‚»ãƒ«ï¼ˆè»½é‡åŒ–ç‰ˆï¼‰ */
td.swap-drop-target {
    background-color: rgba(34, 197, 94, 0.15) !important;
    border: 1px solid #22c55e !important;
    /* box-shadowã‚’å‰Šé™¤ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š */
}

/* ä¸»ã‚­ãƒ¼ã‚»ãƒ«ã®ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½çŠ¶æ…‹ */
td[data-is-primary-key="true"][draggable="true"] {
    cursor: move;
    position: relative;
}

/* ä¸»ã‚­ãƒ¼ã‚»ãƒ«ã«ãƒ‰ãƒ©ãƒƒã‚°ãƒ’ãƒ³ãƒˆè¡¨ç¤º */
td[data-is-primary-key="true"][draggable="true"]:hover::before {
    content: "ãƒ‰ãƒ©ãƒƒã‚°ã§å€¤ã‚’äº¤æ›";
    position: absolute;
    top: -25px;
    left: 0;
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 2px 6px;
    border-radius: 3px;
    font-size: 10px;
    white-space: nowrap;
    z-index: 1000;
    opacity: 0.9;
    pointer-events: none;
}

/* ä¸»ã‚­ãƒ¼ã‚»ãƒ«ã®ãƒ›ãƒãƒ¼åŠ¹æœ */
td[data-is-primary-key="true"][draggable="true"]:hover {
    background-color: rgba(255, 193, 7, 0.1) !important;
}

td[data-is-primary-key="true"][draggable="true"]:active {
    cursor: grabbing;
} 